/*
 * jQuery multiselect plugin
 *
 * Copyright (c) 2009 Jeremy Stephens
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(e){function d(g,f){return(g==f?0:(g<f?-1:1))}function b(g,f){objects=g.find("option");if(e.isArray(f)){sorted=objects.sort(function(j,i){return d(f.indexOf(j.innerHTML),f.indexOf(i.innerHTML))})}else{sorted=objects.sort(function(j,i){return d(j.innerHTML,i.innerHTML)})}g.html(sorted)}function c(g,f){f.append(g.children("option:selected").remove())}function a(g,f){f.append(g.children().remove())}e.fn.multiselect=function(f){var g=e.extend({sort:true,autoSize:false},f);this.each(function(m){var l=e(this);var s=l.find("select");if(s.length<2){return}s.attr("multiple",true);var r=l.find("input:button");if(r.length<2){return}var k=s.eq(0);var u=s.eq(1);if(r.length==4){var o=r.eq(0);var p=r.eq(1);var t=r.eq(2);var q=r.eq(3)}else{var o=r.eq(0);var p=null;var t=r.eq(1);var q=null}var j=function(){c(k,u);if(g.sort){b(u,g.sort)}};o.click(j);k.dblclick(j);if(p){p.click(function(){a(k,u);if(g.sort){b(u,g.sort)}})}var n=function(){c(u,k);if(g.sort){b(k,g.sort)}};t.click(n);u.dblclick(n);if(q){q.click(function(){a(u,k);if(g.sort){b(k,g.sort)}})}if(g.sort){b(k,g.sort);b(u,g.sort)}if(g.autoSize){w=((x=k.width())>(y=u.width())?x:y);h=((x=k.height())>(y=u.height())?x:y);s.width(w+10);s.height(h+10)}l.parents("form").submit(function(){u.find("option").attr("selected",true)})})}})(jQuery);